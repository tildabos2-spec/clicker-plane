<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‚úàÔ∏è –í–æ–µ–Ω–Ω—ã–µ –°–∞–º–æ–ª—ë—Ç—ã ‚Äî –ö–ª–∏–∫–µ—Ä</title>
  
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º PyScript -->
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  
  <style>
    body { font-family: Arial, sans-serif; background: #f0f8ff; padding: 20px; }
    .header { background: #1a2530; color: gold; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 20px; }
    .stats { display: flex; justify-content: space-around; margin: 15px 0; }
    .stat { background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .click-btn {
      background: #e74c3c; color: white; border: none; padding: 20px 40px;
      font-size: 24px; border-radius: 15px; cursor: pointer; margin: 20px 0;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .click-btn:hover { background: #c0392b; }
    .section { background: white; padding: 15px; border-radius: 10px; margin: 15px 0; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .item { display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; border-bottom: 1px solid #eee; }
    .buy-btn { background: #3498db; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    .buy-btn:disabled { background: #95a5a6; cursor: not-allowed; }
    .purchased { background: #2ecc71 !important; }
  </style>
</head>
<body>
  <div class="header">
    <h1>‚úàÔ∏è –í–æ–µ–Ω–Ω—ã–µ –°–∞–º–æ–ª—ë—Ç—ã ‚Äî –ö–ª–∏–∫–µ—Ä</h1>
    <div id="money">–î–µ–Ω—å–≥–∏: $0</div>
  </div>

  <div class="stats">
    <div class="stat">–ö–ª–∏–∫: <span id="click-power">1</span></div>
    <div class="stat">–î–æ—Ö–æ–¥: <span id="passive-income">0</span>$/—Å–µ–∫</div>
  </div>

  <button class="click-btn" onclick="clickAircraft()">‚úàÔ∏è –ö–õ–ò–ö–ù–ò –ù–ê –°–ê–ú–û–õ–Å–¢!</button>

  <div class="section">
    <h3>‚úàÔ∏è –°–∞–º–æ–ª—ë—Ç—ã</h3>
    <div id="aircrafts"></div>
  </div>

  <div class="section">
    <h3>üõí –£–ª—É—á—à–µ–Ω–∏—è</h3>
    <div id="upgrades"></div>
  </div>

  <py-script>
import json
from js import document, setInterval
from pyodide.ffi import create_proxy

# –î–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
game = {
    "money": 0,
    "click_power": 1,
    "passive_income": 0,
    "aircrafts": {},
    "upgrades": []
}

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
def save_game():
    try:
        storage = window.localStorage
        storage.setItem("clicker_game", json.dumps(game))
    except:
        pass

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
def load_game():
    global game
    try:
        storage = window.localStorage
        saved = storage.getItem("clicker_game")
        if saved:
            game.update(json.loads(saved))
    except:
        pass

load_game()

# –°–∞–º–æ–ª—ë—Ç—ã
AIRCRAFTS = {
    "f22": {"name": "F-22 Raptor", "emoji": "‚úàÔ∏è", "cost": 50, "income": 1, "desc": "–°–®–ê, —Å—Ç–µ–ª—Å-–∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª—å"},
    "su57": {"name": "–°—É-57", "emoji": "üõ©Ô∏è", "cost": 100, "income": 2, "desc": "–†–æ—Å—Å–∏—è, –ø—è—Ç–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è"},
    "b2": {"name": "B-2 Spirit", "emoji": "üõ´", "cost": 500, "income": 10, "desc": "–°–®–ê, —Å—Ç–µ–ª—Å-–±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫"},
    "rafale": {"name": "Dassault Rafale", "emoji": "‚úàÔ∏è", "cost": 300, "income": 6, "desc": "–§—Ä–∞–Ω—Ü–∏—è, –º–Ω–æ–≥–æ—Ü–µ–ª–µ–≤–æ–π"},
    "typhoon": {"name": "Eurofighter Typhoon", "emoji": "‚úàÔ∏è", "cost": 400, "income": 8, "desc": "–ï–≤—Ä–æ–ø–∞, —Å–≤–µ—Ä—Ö–º–∞–Ω—ë–≤—Ä–µ–Ω–Ω—ã–π"},
    "j20": {"name": "Chengdu J-20", "emoji": "‚úàÔ∏è", "cost": 600, "income": 12, "desc": "–ö–∏—Ç–∞–π, —Å—Ç–µ–ª—Å-–∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª—å"},
    "f35": {"name": "F-35 Lightning II", "emoji": "‚úàÔ∏è", "cost": 700, "income": 15, "desc": "–°–®–ê, –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π"},
    "tu160": {"name": "–¢—É-160", "emoji": "‚úàÔ∏è", "cost": 1000, "income": 25, "desc": "–†–æ—Å—Å–∏—è, —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫"},
    "a10": {"name": "A-10 Thunderbolt II", "emoji": "‚úàÔ∏è", "cost": 800, "income": 20, "desc": "–°–®–ê, —à—Ç—É—Ä–º–æ–≤–∏–∫ '–í–∞—Ä—Ö–æ–≥'"},
    "sr71": {"name": "SR-71 Blackbird", "emoji": "üõ∏", "cost": 5000, "income": 100, "desc": "–°–®–ê, —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Ä–∞–∑–≤–µ–¥—á–∏–∫"}
}

# –£–ª—É—á—à–µ–Ω–∏—è
UPGRADES = {
    "click_1": {"name": "–£–ª—É—á—à–µ–Ω–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª–∏", "cost": 100, "effect": "click_power += 1", "desc": "+1 –∫ –∫–ª–∏–∫—É"},
    "click_2": {"name": "–¢—É—Ä–±–æ—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ", "cost": 500, "effect": "click_power += 5", "desc": "+5 –∫ –∫–ª–∏–∫—É"},
    "auto_1": {"name": "–î—Ä–æ–Ω-—Ä–∞–∑–≤–µ–¥—á–∏–∫", "cost": 200, "effect": "passive_income += 1", "desc": "+1$/—Å–µ–∫"},
    "auto_2": {"name": "–≠—Å–∫–∞–¥—Ä–∏–ª—å—è", "cost": 1000, "effect": "passive_income += 5", "desc": "+5$/—Å–µ–∫"},
    "mult_1": {"name": "–†–∞–∫–µ—Ç—ã ¬´–í–æ–∑–¥—É—Ö-–í–æ–∑–¥—É—Ö¬ª", "cost": 300, "effect": "click_power *= 2", "desc": "x2 –∫ –∫–ª–∏–∫—É"}
}

def update_ui():
    document.getElementById("money").innerText = f"–î–µ–Ω—å–≥–∏: ${game['money']:,}"
    document.getElementById("click-power").innerText = str(game["click_power"])
    document.getElementById("passive-income").innerText = str(game["passive_income"])
    
    # –°–∞–º–æ–ª—ë—Ç—ã
    aircrafts_html = ""
    for id, ac in AIRCRAFTS.items():
        owned = game["aircrafts"].get(id, 0)
        disabled = "disabled" if game["money"] < ac["cost"] else ""
        aircrafts_html += f'''
        <div class="item">
            <div>
                <strong>{ac["emoji"]} {ac["name"]}</strong><br>
                <small>{ac["desc"]}</small><br>
                <small>–î–æ—Ö–æ–¥: ${ac["income"]}/—Å–µ–∫ | –í–ª–∞–¥–µ–µ—à—å: {owned}</small>
            </div>
            <button class="buy-btn" onclick="buyAircraft('{id}')" {disabled}>
                –ö—É–ø–∏—Ç—å –∑–∞ ${ac["cost"]}
            </button>
        </div>
        '''
    document.getElementById("aircrafts").innerHTML = aircrafts_html
    
    # –£–ª—É—á—à–µ–Ω–∏—è
    upgrades_html = ""
    for id, up in UPGRADES.items():
        purchased = id in game["upgrades"]
        disabled = "disabled" if purchased or game["money"] < up["cost"] else ""
        btn_text = "–ö—É–ø–ª–µ–Ω–æ" if purchased else f"${up['cost']}"
        upgrades_html += f'''
        <div class="item" {"style='background:#d4edda'" if purchased else ""}>
            <div>
                <strong>{up["name"]}</strong><br>
                <small>{up["desc"]}</small>
            </div>
            <button class="buy-btn" onclick="buyUpgrade('{id}')" {disabled}>
                {btn_text}
            </button>
        </div>
        '''
    document.getElementById("upgrades").innerHTML = upgrades_html

def click_aircraft():
    game["money"] += game["click_power"]
    save_game()
    update_ui()

def buy_aircraft(id):
    if id not in AIRCRAFTS:
        return
    ac = AIRCRAFTS[id]
    if game["money"] < ac["cost"]:
        return
    game["money"] -= ac["cost"]
    game["aircrafts"][id] = game["aircrafts"].get(id, 0) + 1
    game["passive_income"] += ac["income"]
    save_game()
    update_ui()

def buy_upgrade(id):
    if id not in UPGRADES or id in game["upgrades"]:
        return
    up = UPGRADES[id]
    if game["money"] < up["cost"]:
        return
    game["money"] -= up["cost"]
    game["upgrades"].append(id)
    effect = up["effect"]
    if "click_power +=" in effect:
        game["click_power"] += int(effect.split("+=")[1])
    elif "click_power *=" in effect:
        game["click_power"] *= int(effect.split("*=")[1])
    elif "passive_income +=" in effect:
        game["passive_income"] += int(effect.split("+=")[1])
    save_game()
    update_ui()

# –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –≤ JS
window.clickAircraft = create_proxy(click_aircraft)
window.buyAircraft = create_proxy(buy_aircraft)
window.buyUpgrade = create_proxy(buy_upgrade)

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥
def passive_income():
    if game["passive_income"] > 0:
        game["money"] += game["passive_income"]
        save_game()
        update_ui()

setInterval(create_proxy(passive_income), 1000)

# –ü–µ—Ä–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
update_ui()
  </py-script>
</body>
</html>